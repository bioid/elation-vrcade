elation.require("engine.engine", function() {
  elation.engine.create("test", ["physics", "controls", "sound", "ai", "world", "admin", "render"], function(engine) {
    engine.systems.world.load({ 
      "name":"ground",
      "parentname":"",
      "type":"terrain",
      "properties":{
        "position":[0,-4,0],
        "persist":true,
        "textures.map":"/media/vrcade/textures/carpet-stars.jpg",
        "textures.mapRepeat":[100,100],
        "textures.normalMap":"/media/vrcade/textures/carpet-normal.jpg"
      },
      "things":{
        "sun":{
          "name":"sun",
          "parentname":"",
          "type":"light",
          "properties":{
            "position":[-40,30,25],
            "persist":true,
            "type":"directional",
            "intensity":0.6
          }
        },
        "galaxian":{
          "name":"galaxian",
          "parentname":"",
          "type":"arcadecabinet",
          "properties":{
            "persist":true,
            "gamename":"galaxian", 
            "render.gltf":"/media/vrcade/models/galaga/galaga.json" 
          }
        },
        "pacman":{
          "name":"pacman",
          "parentname":"",
          "type":"arcadecabinet",
          "properties":{
            "position":[4.5,0,0],
            "persist":true,
            "gamename":"pacman", 
            "render.gltf":"/media/vrcade/models/pacman/pacman.json"
          }
        },
        "joust":{
          "name":"joust",
          "parentname":"",
          "type":"arcadecabinet",
          "properties":{
            "position":[-4.5,0,0],
            "persist":true,
            "gamename":"joust", 
            "render.gltf":"/media/vrcade/models/joust/joust.json"
          }
        }
      } 
    });
    engine.start();
    var view = elation.engine.systems.render.view("main", elation.html.create({ tag: 'div', append: document.body }), { fullsize: 1, picking: 1, engine: 'test', showstats: true } );
  });
});

